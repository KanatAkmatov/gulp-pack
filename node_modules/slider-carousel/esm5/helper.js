import { Injectable, ComponentFactoryResolver, ApplicationRef, Injector, EmbeddedViewRef, ComponentRef } from '@angular/core';
import { Observable } from 'rxjs';
import { SliderCarouselPreviewComponent } from './slider-carousel-preview/slider-carousel-preview.component';
import { isNullOrUndefined } from 'util';
var Helper = /** @class */ (function () {
    function Helper(componentFactoryResolver, appRef, injector) {
        this.componentFactoryResolver = componentFactoryResolver;
        this.appRef = appRef;
        this.injector = injector;
    }
    Helper.prototype.openPreview = function (data) {
        if (data === void 0) { data = {}; }
        var onCloseSubscribe;
        var object;
        object = {
            onClose: new Observable(function (subscribe) { return onCloseSubscribe = subscribe; }),
            instance: null
        };
        var componenRef = this.createComponent(SliderCarouselPreviewComponent, data, function (data) {
            onCloseSubscribe.next(data);
        });
        object.instance = componenRef.instance;
        return object;
    };
    Helper.prototype.createComponent = function (component, data, onClose) {
        var _this = this;
        var componentRef = this.componentFactoryResolver
            .resolveComponentFactory(component)
            .create(this.injector);
        if (!data)
            data = {};
        data.close = function (data) {
            _this.appRef.detachView(componentRef.hostView);
            componentRef.destroy();
            if (onClose)
                onClose(data);
        };
        Object.assign(componentRef.instance, { modalRef: data });
        this.appRef.attachView(componentRef.hostView);
        var domElem = componentRef.hostView.rootNodes[0];
        document.body.appendChild(domElem);
        return componentRef;
    };
    Helper.prototype.smoothScroll = function (element, scroll, duration, direction) {
        if (duration === void 0) { duration = 400; }
        if (direction === void 0) { direction = 'top'; }
        var start = direction === 'top' ? element.scrollTop : element.scrollLeft;
        if (scroll < 0)
            scroll = 0;
        var distance = (scroll - start) - 77;
        var startTime = new Date().getTime();
        if (!duration)
            duration = 400;
        var easeInOutQuart = function (time, from, distance, duration) {
            if ((time /= duration / 2) < 1)
                return distance / 2 * time * time * time * time + from;
            return -distance / 2 * ((time -= 2) * time * time * time - 2) + from;
        };
        var timer = setInterval(function () {
            var time = new Date().getTime() - startTime, newScroll = easeInOutQuart(time, start, distance, duration);
            if (time >= duration) {
                clearInterval(timer);
                timer = null;
            }
            if (element.scrollTo) {
                if (direction === 'top')
                    element.scrollTo(element.scrollLeft, newScroll);
                else
                    element.scrollTo(newScroll, element.scrollTop);
            }
            else {
                if (direction === 'top')
                    element.scrollTop = newScroll;
                else
                    element.scrollLeft = newScroll;
            }
        }, 1000 / 60);
        return timer;
    };
    Helper.prototype.elementIsChild = function (element, parentElment) {
        try {
            while (!isNullOrUndefined(element) && element.tagName.toUpperCase() !== 'BODY') {
                if (element === parentElment) {
                    return true;
                }
                element = element.parentNode;
            }
            return false;
        }
        catch (_a) {
            return false;
        }
    };
    Helper.prototype.isMobileDevice = function () {
        return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1);
    };
    Helper.ctorParameters = function () { return [
        { type: ComponentFactoryResolver },
        { type: ApplicationRef },
        { type: Injector }
    ]; };
    Helper.decorators = [
        { type: Injectable }
    ];
    Helper.ctorParameters = function () { return [
        { type: ComponentFactoryResolver },
        { type: ApplicationRef },
        { type: Injector }
    ]; };
    return Helper;
}());
export { Helper };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaGVscGVyLmpzIiwic291cmNlUm9vdCI6Im5nOi8vc2xpZGVyLWNhcm91c2VsLyIsInNvdXJjZXMiOlsiaGVscGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxVQUFVLEVBQUUsd0JBQXdCLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzlILE9BQU8sRUFBRSxVQUFVLEVBQWMsTUFBTSxNQUFNLENBQUM7QUFDOUMsT0FBTyxFQUFFLDhCQUE4QixFQUFFLE1BQU0sNkRBQTZELENBQUM7QUFDN0csT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sTUFBTSxDQUFDO0FBRXpDO0lBR0ksZ0JBQ1ksd0JBQWtELEVBQ2xELE1BQXNCLEVBQ3RCLFFBQWtCO1FBRmxCLDZCQUF3QixHQUF4Qix3QkFBd0IsQ0FBMEI7UUFDbEQsV0FBTSxHQUFOLE1BQU0sQ0FBZ0I7UUFDdEIsYUFBUSxHQUFSLFFBQVEsQ0FBVTtJQUc5QixDQUFDO0lBRUcsNEJBQVcsR0FBbEIsVUFBbUIsSUFBaUM7UUFBakMscUJBQUEsRUFBQSxTQUFpQztRQUM3QyxJQUFJLGdCQUFpQyxDQUFDO1FBQzVDLElBQUksTUFHRyxDQUFDO1FBRUYsTUFBTSxHQUFHO1lBQ0wsT0FBTyxFQUFFLElBQUksVUFBVSxDQUFDLFVBQUMsU0FBUyxJQUFLLE9BQUEsZ0JBQWdCLEdBQUcsU0FBUyxFQUE1QixDQUE0QixDQUFDO1lBQ3BFLFFBQVEsRUFBRSxJQUFJO1NBQ2pCLENBQUM7UUFFRixJQUFJLFdBQVcsR0FBRyxJQUFJLENBQUMsZUFBZSxDQUFDLDhCQUE4QixFQUFFLElBQUksRUFBRSxVQUFDLElBQUk7WUFDOUUsZ0JBQWdCLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2hDLENBQUMsQ0FBQyxDQUFDO1FBQ0gsTUFBTSxDQUFDLFFBQVEsR0FBSSxXQUE0RCxDQUFDLFFBQVEsQ0FBQztRQUV6RixPQUFP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TSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIENvbXBvbmVudEZhY3RvcnlSZXNvbHZlciwgQXBwbGljYXRpb25SZWYsIEluamVjdG9yLCBFbWJlZGRlZFZpZXdSZWYsIENvbXBvbmVudFJlZiB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgT2JzZXJ2YWJsZSwgU3Vic2NyaWJlciB9IGZyb20gJ3J4anMnO1xuaW1wb3J0IHsgU2xpZGVyQ2Fyb3VzZWxQcmV2aWV3Q29tcG9uZW50IH0gZnJvbSAnLi9zbGlkZXItY2Fyb3VzZWwtcHJldmlldy9zbGlkZXItY2Fyb3VzZWwtcHJldmlldy5jb21wb25lbnQnO1xuaW1wb3J0IHsgaXNOdWxsT3JVbmRlZmluZWQgfSBmcm9tICd1dGlsJztcblxuQEluamVjdGFibGUoKVxuZXhwb3J0IGNsYXNzIEhlbHBlciB7XG5cbiAgICBjb25zdHJ1Y3RvcihcbiAgICAgICAgcHJpdmF0ZSBjb21wb25lbnRGYWN0b3J5UmVzb2x2ZXI6IENvbXBvbmVudEZhY3RvcnlSZXNvbHZlcixcbiAgICAgICAgcHJpdmF0ZSBhcHBSZWY6IEFwcGxpY2F0aW9uUmVmLFxuICAgICAgICBwcml2YXRlIGluamVjdG9yOiBJbmplY3RvclxuICAgICkge1xuXG4gICAgfVxuXHRcblx0cHVibGljIG9wZW5QcmV2aWV3KGRhdGE6IHsgW2tleTogc3RyaW5nXTogYW55IH0gPSB7fSkge1xuICAgICAgICBsZXQgb25DbG9zZVN1YnNjcmliZTogU3Vic2NyaWJlcjxhbnk+O1xuXHRcdGxldCBvYmplY3Q6IHtcbiAgICAgICAgICAgIG9uQ2xvc2U6IE9ic2VydmFibGU8YW55PixcbiAgICAgICAgICAgIGluc3RhbmNlOiBTbGlkZXJDYXJvdXNlbFByZXZpZXdDb21wb25lbnRcbiAgICAgICAgfTtcblxuICAgICAgICBvYmplY3QgPSB7XG4gICAgICAgICAgICBvbkNsb3NlOiBuZXcgT2JzZXJ2YWJsZSgoc3Vic2NyaWJlKSA9PiBvbkNsb3NlU3Vic2NyaWJlID0gc3Vic2NyaWJlKSxcbiAgICAgICAgICAgIGluc3RhbmNlOiBudWxsXG4gICAgICAgIH07XG5cbiAgICAgICAgbGV0IGNvbXBvbmVuUmVmID0gdGhpcy5jcmVhdGVDb21wb25lbnQoU2xpZGVyQ2Fyb3VzZWxQcmV2aWV3Q29tcG9uZW50LCBkYXRhLCAoZGF0YSkgPT4ge1xuICAgICAgICAgICAgb25DbG9zZVN1YnNjcmliZS5uZXh0KGRhdGEpO1xuICAgICAgICB9KTtcbiAgICAgICAgb2JqZWN0Lmluc3RhbmNlID0gKGNvbXBvbmVuUmVmIGFzIENvbXBvbmVudFJlZjxTbGlkZXJDYXJvdXNlbFByZXZpZXdDb21wb25lbnQ+KS5pbnN0YW5jZTtcblxuICAgICAgICByZXR1cm4gb2JqZWN0O1xuICAgIH1cbiAgICBcbiAgICBwdWJsaWMgY3JlYXRlQ29tcG9uZW50KGNvbXBvbmVudDogYW55LCBkYXRhLCBvbkNsb3NlOiAoZGF0YSkgPT4gdm9pZCkge1xuICAgICAgICBjb25zdCBjb21wb25lbnRSZWYgPSB0aGlzLmNvbXBvbmVudEZhY3RvcnlSZXNvbHZlclxuICAgICAgICAgICAgLnJlc29sdmVDb21wb25lbnRGYWN0b3J5KGNvbXBvbmVudClcbiAgICAgICAgICAgIC5jcmVhdGUodGhpcy5pbmplY3Rvcik7XG5cbiAgICAgICAgaWYgKCFkYXRhKSBkYXRhID0ge307XG5cbiAgICAgICAgZGF0YS5jbG9zZSA9IChkYXRhKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmFwcFJlZi5kZXRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gICAgICAgICAgICBjb21wb25lbnRSZWYuZGVzdHJveSgpO1xuICAgICAgICAgICAgaWYgKG9uQ2xvc2UpIG9uQ2xvc2UoZGF0YSk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICBPYmplY3QuYXNzaWduKGNvbXBvbmVudFJlZi5pbnN0YW5jZSwgeyBtb2RhbFJlZjogZGF0YSB9KTtcblxuICAgICAgICB0aGlzLmFwcFJlZi5hdHRhY2hWaWV3KGNvbXBvbmVudFJlZi5ob3N0Vmlldyk7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBkb21FbGVtID0gKGNvbXBvbmVudFJlZi5ob3N0VmlldyBhcyBFbWJlZGRlZFZpZXdSZWY8YW55Pikucm9vdE5vZGVzWzBdIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICBcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkb21FbGVtKTtcblxuICAgICAgICByZXR1cm4gY29tcG9uZW50UmVmO1xuICAgIH1cblxuICAgIHB1YmxpYyBzbW9vdGhTY3JvbGwoZWxlbWVudDogSFRNTEVsZW1lbnQsIHNjcm9sbDogbnVtYmVyLCBkdXJhdGlvbjogbnVtYmVyID0gNDAwLCBkaXJlY3Rpb246IHN0cmluZyA9ICd0b3AnKSB7XG5cdFx0bGV0IHN0YXJ0ID0gZGlyZWN0aW9uID09PSAndG9wJyA/IGVsZW1lbnQuc2Nyb2xsVG9wIDogZWxlbWVudC5zY3JvbGxMZWZ0O1xuXG5cdFx0aWYgKHNjcm9sbCA8IDApIHNjcm9sbCA9IDA7XG5cblx0XHRsZXQgZGlzdGFuY2UgPSAoc2Nyb2xsIC0gc3RhcnQpIC0gNzc7XG5cblx0XHRsZXQgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG5cblx0XHRpZiAoIWR1cmF0aW9uKSBkdXJhdGlvbiA9IDQwMDtcblxuXHRcdGxldCBlYXNlSW5PdXRRdWFydCA9ICh0aW1lLCBmcm9tLCBkaXN0YW5jZSwgZHVyYXRpb24pID0+IHtcblx0XHRcdGlmICgodGltZSAvPSBkdXJhdGlvbiAvIDIpIDwgMSlcblx0XHRcdFx0cmV0dXJuIGRpc3RhbmNlIC8gMiAqIHRpbWUgKiB0aW1lICogdGltZSAqIHRpbWUgKyBmcm9tO1xuXHRcdFx0cmV0dXJuIC1kaXN0YW5jZSAvIDIgKiAoKHRpbWUgLT0gMikgKiB0aW1lICogdGltZSAqIHRpbWUgLSAyKSArIGZyb207XG5cdFx0fTtcblxuXHRcdGxldCB0aW1lciA9IHNldEludGVydmFsKCgpID0+IHtcblx0XHRcdGNvbnN0IHRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKSAtIHN0YXJ0VGltZSxcblx0XHRcdG5ld1Njcm9sbCA9IGVhc2VJbk91dFF1YXJ0KHRpbWUsIHN0YXJ0LCBkaXN0YW5jZSwgZHVyYXRpb24pO1xuXG5cdFx0XHRpZiAodGltZSA+PSBkdXJhdGlvbikge1xuXHRcdFx0XHRjbGVhckludGVydmFsKHRpbWVyKTtcblx0XHRcdFx0dGltZXIgPSBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoZWxlbWVudC5zY3JvbGxUbykge1xuXHRcdFx0XHRpZiAoZGlyZWN0aW9uID09PSAndG9wJylcblx0XHRcdFx0XHRlbGVtZW50LnNjcm9sbFRvKGVsZW1lbnQuc2Nyb2xsTGVmdCwgbmV3U2Nyb2xsKTtcblx0XHRcdFx0ZWxzZVxuXHRcdFx0XHRcdGVsZW1lbnQuc2Nyb2xsVG8obmV3U2Nyb2xsLCBlbGVtZW50LnNjcm9sbFRvcCk7XG5cdFx0XHR9XG5cdFx0XHRlbHNlIHtcblx0XHRcdFx0aWYgKGRpcmVjdGlvbiA9PT0gJ3RvcCcpXG5cdFx0XHRcdFx0ZWxlbWVudC5zY3JvbGxUb3AgPSBuZXdTY3JvbGw7XG5cdFx0XHRcdGVsc2Vcblx0XHRcdFx0XHRlbGVtZW50LnNjcm9sbExlZnQgPSBuZXdTY3JvbGw7XG5cdFx0XHR9XG5cdFx0fSwgMTAwMCAvIDYwKTtcblxuXHRcdHJldHVybiB0aW1lcjtcbiAgICB9XG4gICAgXG5cdHB1YmxpYyBlbGVtZW50SXNDaGlsZChlbGVtZW50LCBwYXJlbnRFbG1lbnQpOiBib29sZWFue1xuXHRcdHRyeSB7XG5cdFx0XHR3aGlsZSAoIWlzTnVsbE9yVW5kZWZpbmVkKGVsZW1lbnQpICYmIGVsZW1lbnQudGFnTmFtZS50b1VwcGVyQ2FzZSgpICE9PSAnQk9EWScpIHtcblx0XHRcdFx0aWYgKGVsZW1lbnQgPT09IHBhcmVudEVsbWVudCkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdGNhdGNoIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdH1cblxuICAgIHB1YmxpYyBpc01vYmlsZURldmljZSgpIHtcbiAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93Lm9yaWVudGF0aW9uICE9PSBcInVuZGVmaW5lZFwiKSB8fCAobmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKCdJRU1vYmlsZScpICE9PSAtMSk7XG4gICAgfVxufSJdfQ==